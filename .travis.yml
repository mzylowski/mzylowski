dist: xenial
matrix:
  include:
    - language: go
      sudo: required
      go: 1.12.5
      before_script:
        - go get -u github.com/vbatts/git-validation
      script:
        - git-validation -q -run DCO,short-subject -range b9d82623fadc8066e7832035d25d879e150bd6f3..HEAD

    - language: node_js
      sudo: required
      node_js: 9
      services:
      - docker
      cache:
        yarn: false
      install:
        - yarn install
        - sudo apt update && sudo apt install poppler-utils
      script:
        - ./build.sh && sleep 5
        - docker run -d -p 8080:80 --name cv -v $(pwd):/var/www/html cv_builder && sleep 5
        - docker exec cv pdflatex cv.tex
        - docker exec cv pdftotext -enc Windows-1255 cv.pdf cv.md
        - yarn spellcheck
